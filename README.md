# ğŸ”¬ IMFE - Laboratorio de IA Colaborativa

Este repositorio contiene una aplicaciÃ³n de **Chatbot AcadÃ©mico** diseÃ±ada como instrumento de recolecciÃ³n de datos para investigaciones en educaciÃ³n superior. El sistema estÃ¡ optimizado para estudiar la alfabetizaciÃ³n en IA, la tÃ©cnica *Chain of Thought* (CoT) y la carga cognitiva en estudiantes de ciencias de la salud.

## ğŸ“ DescripciÃ³n del Proyecto
La app permite a los grupos de estudiantes interactuar con un asistente experto en temas especÃ­ficos (ej. **DistribuciÃ³n Normal**). A diferencia de un chat convencional, este sistema registra cada interacciÃ³n, mensaje y retroalimentaciÃ³n en una base de datos **Supabase** para su posterior anÃ¡lisis estadÃ­stico en **R**.

### ğŸ¯ Preguntas de InvestigaciÃ³n Vinculadas
* Â¿CÃ³mo influye el razonamiento paso a paso en la precisiÃ³n de la resoluciÃ³n de problemas?
* MediciÃ³n de la exigencia mental mediante el cruce de logs con instrumentos externos.
* *Seguimiento de la tasa de intentos de fraude y de la adopciÃ³n real de la herramienta.

---

## ğŸš€ CaracterÃ­sticas Principales

* **ConfiguraciÃ³n por SesiÃ³n:** Ingreso de NRC, ID de Grupo e Integrantes.
* **DefiniciÃ³n de Tema:** El asistente adapta su comportamiento segÃºn el tema indicado por los estudiantes.
* **Asistente HÃ­brido (RAG Opcional):** Motor de bÃºsqueda que utiliza los materiales del curso (PDF) solo si el usuario decide subirlos.
* **Soporte LaTeX Avanzado:** RenderizaciÃ³n de fÃ³rmulas estadÃ­sticas complejas mediante los delimitadores `$` y `$$`.
* **Sistema de Feedback Persistente:** Botones de "pulgar arriba/abajo" vinculados a cada mensaje, que mantienen su estado y permiten actualizar la base de datos.
* **UX Anti-Ansiedad:** Indicadores visuales de carga (*spinners*) mientras la IA procesa respuestas complejas.

---

## ğŸ› ï¸ Requisitos TÃ©cnicos

### ğŸ“¦ Dependencias (`requirements.txt`)
```text
streamlit>=1.33.0
pandas
openai
langchain
langchain-community
langchain-openai
faiss-cpu
supabase
pypdf
```
## ğŸ” ConfiguraciÃ³n de Secrets (Streamlit Cloud)
Es necesario configurar las siguientes variables de entorno:
```TOML
OPENAI_API_KEY = "tu_clave_api"
SUPABASE_URL = "[https://tu-proyecto.supabase.co](https://tu-proyecto.supabase.co)"
SUPABASE_KEY = "tu-clave-anon-public"
```

## ğŸ—„ï¸ Estructura de la Base de Datos (SQL)
Para habilitar el registro, ejecuta este script en el SQL Editor de tu proyecto de Supabase:
```SQL
create table interacciones_investigacion (
  id bigint generated by default as identity primary key,
  session_id text,
  nrc text,
  grupo text,
  tema text,
  estudiante text,
  mensaje_usuario text,
  respuesta_ia text,
  usa_rag boolean,
  feedback text,
  timestamp timestamptz default now()
);
```

## ğŸ“Š ConexiÃ³n para AnÃ¡lisis en R
Para realizar el anÃ¡lisis de datos, conÃ©ctate al Connection Pooler de Supabase utilizando el puerto 6543:
```R
library(DBI)
library(RPostgres)

con <- dbConnect(
  RPostgres::Postgres(),
  dbname = "postgres",
  host = "aws-1-us-east-1.pooler.supabase.com",
  port = 6543,
  user = "postgres.[ID_DE_TU_PROYECTO]",
  password = "TU_PASSWORD_DE_DB",
  sslmode = "require"
)

# Carga de datos para anÃ¡lisis
df_logs <- dbGetQuery(con, "SELECT * FROM interacciones_investigacion")
```

